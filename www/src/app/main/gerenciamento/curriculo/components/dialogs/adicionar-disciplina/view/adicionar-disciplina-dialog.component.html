<div fxLayout="column" fxFlex="1 0 auto" class="dialog-content-wrapper">
    <mat-toolbar class="mat-accent m-0">
        <mat-toolbar-row
            fxFlex
            fxLayout="row"
            fxLayoutAlign="space-between center"
        >
            <span class="title dialog-title">{{ titulo }}</span>
            <button
                mat-icon-button
                (click)="fecharDialog()"
                aria-label="Fechar dialog"
            >
                <mat-icon>close</mat-icon>
            </button>
        </mat-toolbar-row>
    </mat-toolbar>

    <div fxFlex="100" class="p-16 pb-0 m-0 noPadding" fusePerfectScrollbar>
        <!-- FORM -->
        <form
            name="adicionarDisciplinaForm"
            [formGroup]="adicionarDisciplinaForm"
            fxLayout="column"
            novalidate
        >
            <div fxLayout="row">
                <!-- DISCIPLINA -->

                <mat-form-field appearance="outline" fxFlex class="mr-4">
                    <mat-label>Disciplina</mat-label>
                    <mat-select
                        fxLayout="column"
                        (selectionChange)="onChangeDisciplina($event.value)"
                        formControlName="disciplina"
                    >
                        <input
                            class="px-8 my-8"
                            placeholder="Pesquisar..."
                            matInput
                            name="filtro"
                            (keyup)="
                                filtrarDisciplinasPreRequisito(
                                    $event.target.value
                                )
                            "
                        />
                        <mat-divider></mat-divider>
                        <div
                            *ngFor="
                                let itemDisciplina of disciplinas
                                    | filter: filtroDisciplinaPreRequisito
                            "
                        >
                            <mat-option [value]="itemDisciplina.codigo">{{
                                itemDisciplina.descricao
                            }}</mat-option>
                        </div>
                    </mat-select>
                </mat-form-field>

                <!-- CREDITO -->
                <mat-form-field appearance="outline" fxFlex>
                    <mat-label>Créditos</mat-label>
                    <input
                        required="true"
                        required="true"
                        matInput
                        name="credito"
                        mask="000"
                        type="text"
                        formControlName="credito"
                    />
                    <mat-error
                        *ngIf="
                            adicionarDisciplinaForm
                                .get('credito')
                                .hasError('required')
                        "
                    >
                        {{ 'GERENCIAMENTO.CAMPO_OBRIGATORIO' | translate }}
                    </mat-error>
                    <mat-error
                        *ngIf="
                            adicionarDisciplinaForm
                                .get('credito')
                                .hasError('pattern')
                        "
                    >
                        {{ 'GERENCIAMENTO.ANO_INVALIDO' | translate }}
                    </mat-error>
                </mat-form-field>
                <!-- CREDITO -->
            </div>

            <div fxLayout="row">
                <!-- CARGA_HORARIA SEMANAL -->
                <ap-fieldset label="Quantidade de aulas semanal" fxFlex>
                    <div fxLayout="row wrap">
                        <!-- TEORICA -->
                        <mat-form-field
                            appearance="outline"
                            fxFlex
                            class="mr-12"
                        >
                            <mat-label>Teórica</mat-label>
                            <input
                                required="true"
                                matInput
                                mask="000"
                                formControlName="aulasSemanaisTeorica"
                            />
                            <mat-error
                                *ngIf="
                                    adicionarDisciplinaForm
                                        .get('aulasSemanaisTeorica')
                                        .hasError('required')
                                "
                            >
                                {{
                                    'GERENCIAMENTO.CAMPO_OBRIGATORIO'
                                        | translate
                                }}
                            </mat-error>
                            <mat-error
                                *ngIf="
                                    adicionarDisciplinaForm
                                        .get('aulasSemanaisTeorica')
                                        .hasError('pattern')
                                "
                            >
                                {{ 'GERENCIAMENTO.ANO_INVALIDO' | translate }}
                            </mat-error>
                        </mat-form-field>
                        <!-- TEORICA -->

                        <!-- PRATICA -->
                        <mat-form-field appearance="outline" fxFlex>
                            <mat-label>Pratica</mat-label>
                            <input
                                required="true"
                                matInput
                                mask="000"
                                formControlName="aulasSemanaisPratica"
                            />
                            <mat-error
                                *ngIf="
                                    adicionarDisciplinaForm
                                        .get('aulasSemanaisPratica')
                                        .hasError('required')
                                "
                            >
                                {{
                                    'GERENCIAMENTO.CAMPO_OBRIGATORIO'
                                        | translate
                                }}
                            </mat-error>
                            <mat-error
                                *ngIf="
                                    adicionarDisciplinaForm
                                        .get('aulasSemanaisPratica')
                                        .hasError('pattern')
                                "
                            >
                                {{ 'GERENCIAMENTO.ANO_INVALIDO' | translate }}
                            </mat-error>
                        </mat-form-field>
                        <!-- PRATICA -->
                    </div>
                </ap-fieldset>
            </div>

            <!-- DISCIPLINA_PREREQUISITO -->

            <div fxLayout="column">
                <mat-form-field appearance="outline">
                    <mat-label>Pré-requisito</mat-label>
                    <mat-select
                        fxLayout="column"
                        formControlName="preRequisitos"
                        multiple
                    >
                        <input
                            class="px-8 my-8"
                            placeholder="Pesquisar..."
                            matInput
                            name="filtro"
                            (keyup)="
                                filtrarDisciplinasPreRequisito(
                                    $event.target.value
                                )
                            "
                        />
                        <mat-divider></mat-divider>
                        <div
                            *ngFor="
                                let disciplinaPreRequisito of disciplinas
                                    | filter: filtroDisciplinaPreRequisito
                            "
                        >
                            <mat-option
                                *ngIf="
                                    adicionarDisciplinaForm.get('disciplina')
                                        .value != disciplinaPreRequisito.codigo
                                "
                                [value]="disciplinaPreRequisito.codigo"
                                >{{
                                    disciplinaPreRequisito.descricao
                                }}</mat-option
                            >
                        </div>
                    </mat-select>
                </mat-form-field>
            </div>

            <!-- DISCIPLINA_PREREQUISITO -->
        </form>
        <!-- FORM -->
    </div>

    <div
        mat-dialog-actions
        class="m-0 p-16"
        fxLayout="row"
        fxLayoutAlign="end center"
    >
        <button
            [disabled]="emProgresso || adicionarDisciplinaForm.invalid"
            class="mat-raised-button mat-accent"
            (click)="salvar()"
        >
            <span>SALVAR</span>
        </button>
    </div>
</div>
